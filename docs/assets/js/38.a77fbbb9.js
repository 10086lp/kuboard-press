(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{381:function(e,r,s){"use strict";s.r(r);var t=s(0),a=Object(t.a)({},function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h2",{attrs:{id:"安装-ingress-controller"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-ingress-controller","aria-hidden":"true"}},[e._v("#")]),e._v(" 安装 Ingress Controller")]),e._v(" "),s("blockquote",[s("p",[e._v("ingress官方文档：https://kubernetes.io/docs/concepts/services-networking/ingress/")]),e._v(" "),s("p",[e._v("Ingress Controllers官网介绍："),s("a",{attrs:{href:"https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/"),s("OutboundLink")],1)]),e._v(" "),s("p",[e._v("本文中使用如下部署方式：https://kubernetes.github.io/ingress-nginx/deploy/baremetal/#using-a-self-provisioned-edge")]),e._v(" "),s("p",[e._v("kubernetes支持多种Ingress Controllers，本文推荐使用")]),e._v(" "),s("p",[e._v("https://github.com/nginxinc/kubernetes-ingress")])]),e._v(" "),s("h3",{attrs:{id:"在-apple-master-a-1-上执行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在-apple-master-a-1-上执行","aria-hidden":"true"}},[e._v("#")]),e._v(" 在 apple-master-a-1 上执行")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("su")]),e._v(" - gitlab-runner\nkubectl apply -f https://raw.githubusercontent.com/eip-work/eip-monitor-repository/master/dashboard/nginx-ingress.yaml\n")])])]),s("h3",{attrs:{id:"在iaas云控制台完成如下配置（公网elb）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在iaas云控制台完成如下配置（公网elb）","aria-hidden":"true"}},[e._v("#")]),e._v(" 在IaaS云控制台完成如下配置（"),s("strong",[e._v("公网ELB")]),e._v("）")]),e._v(" "),s("p",[e._v("创建负载均衡 ELB：")]),e._v(" "),s("p",[e._v("​    监听器 1：80 / TCP， SOURCE_ADDRESS 会话保持")]),e._v(" "),s("p",[e._v("​    服务器资源池 1： apple-worker-x-x 的所有节点的 80端口")]),e._v(" "),s("p",[e._v("​    监听器 2：443 / TCP， SOURCE_ADDRESS 会话保持")]),e._v(" "),s("p",[e._v("​    服务器资源池 2： apple-worker-x-x 的所有节点的443端口")]),e._v(" "),s("p",[e._v("假设刚创建的负载均衡 ELB 的 IP 地址为： z.z.z.z")]),e._v(" "),s("h3",{attrs:{id:"配置域名解析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置域名解析","aria-hidden":"true"}},[e._v("#")]),e._v(" 配置域名解析")]),e._v(" "),s("p",[e._v("将域名 *.apple.yourdomain.com 解析到地址负载均衡服务器 的 IP 地址 z.z.z.z")]),e._v(" "),s("h3",{attrs:{id:"验证配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#验证配置","aria-hidden":"true"}},[e._v("#")]),e._v(" 验证配置")]),e._v(" "),s("p",[e._v("在浏览器访问 a.apple.yourdomain.com，将得到 404 NotFound 错误页面")])])},[],!1,null,null,null);r.default=a.exports}}]);