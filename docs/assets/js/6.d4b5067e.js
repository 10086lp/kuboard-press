(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{216:function(t,v,_){t.exports=_.p+"assets/img/image-20190717113807552.b3fe5f7d.png"},217:function(t,v,_){t.exports=_.p+"assets/img/image-20190717114304953.854b47d8.png"},218:function(t,v,_){t.exports=_.p+"assets/img/image-20190717114354610.6d522c25.png"},219:function(t,v,_){t.exports=_.p+"assets/img/image-20190717115020848.eec5a17e.png"},220:function(t,v,_){t.exports=_.p+"assets/img/image-20190717115403374.48894c27.png"},221:function(t,v,_){t.exports=_.p+"assets/img/image-20190717115457614.c7f0d044.png"},222:function(t,v,_){t.exports=_.p+"assets/img/image-20190717115829821.63b81f36.png"},223:function(t,v,_){t.exports=_.p+"assets/img/image-20190723112105018.a27c638f.png"},224:function(t,v,_){t.exports=_.p+"assets/img/image-20190723112143032.7a5220bd.png"},225:function(t,v,_){t.exports=_.p+"assets/img/image-20190723112204681.8279ca8f.png"},226:function(t,v,_){t.exports=_.p+"assets/img/image-20190723113250521.3b80f3d2.png"},227:function(t,v,_){t.exports=_.p+"assets/img/image-20190723113312360.a3a51c0c.png"},392:function(t,v,_){"use strict";_.r(v);var a=_(0),r=Object(a.a)({},function(){var t=this,v=t.$createElement,a=t._self._c||v;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"存储空间管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#存储空间管理","aria-hidden":"true"}},[t._v("#")]),t._v(" 存储空间管理")]),t._v(" "),a("h2",{attrs:{id:"创建存储类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建存储类","aria-hidden":"true"}},[t._v("#")]),t._v(" 创建存储类")]),t._v(" "),a("p",[t._v("前提")]),t._v(" "),a("p",[t._v("必须具备如下条件：")]),t._v(" "),a("ul",[a("li",[t._v("Kubernetes 集群 （安装在阿里云，本文将使用阿里云的 NFS 服务作为存储资源，Kuboard 也可以运行在其他云环境或者私有环境中。）")]),t._v(" "),a("li",[t._v("已在集群中安装 Kuboard")])]),t._v(" "),a("h3",{attrs:{id:"在阿里云创建-nas-服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在阿里云创建-nas-服务","aria-hidden":"true"}},[t._v("#")]),t._v(" 在阿里云创建 NAS 服务")]),t._v(" "),a("p",[t._v("如果您在其他 IaaS 供应商搭建了 Kubernetes 集群，请参考该 IaaS 供应商的文档，创建 NFS 服务。您也可以自行搭建 NFS 服务器，用来为 Kubernetes 集群提供存储资源。")]),t._v(" "),a("ul",[a("li",[t._v("进入阿里云 "),a("em",[a("strong",[t._v("文件存储 NAS 服务")])]),t._v(" 控制台")])]),t._v(" "),a("p",[t._v("登录 www.aliyun.com 后，在控制台界面的产品与服务中选择 "),a("em",[a("strong",[t._v("文件存储 NAS")])])]),t._v(" "),a("p",[t._v("如下图所示")]),t._v(" "),a("p",[a("img",{attrs:{src:_(216),alt:"image-20190717113807552"}})]),t._v(" "),a("ul",[a("li",[t._v("在 "),a("em",[a("strong",[t._v("文件存储 NAS")])]),t._v(" 控制台中点击 "),a("em",[a("strong",[t._v("创建文件系统")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:_(217),alt:"image-20190717114304953"}})]),t._v(" "),a("ul",[a("li",[t._v("填写表单")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段名称")]),t._v(" "),a("th",[t._v("填写内容")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("地域")]),t._v(" "),a("td",[t._v("请选择您的 Kubernetes 集群所在的地域")]),t._v(" "),a("td",[t._v("文件系统所在地域")])]),t._v(" "),a("tr",[a("td",[t._v("存储类型")]),t._v(" "),a("td",[t._v("容量型 / 或 SSD型")]),t._v(" "),a("td",[t._v("测试目的，使用价格便宜的容量型即可")])]),t._v(" "),a("tr",[a("td",[t._v("协议类型")]),t._v(" "),a("td",[t._v("NFS")]),t._v(" "),a("td",[t._v("请选择NFS")])]),t._v(" "),a("tr",[a("td",[t._v("可用区")]),t._v(" "),a("td",[t._v("请选择您的 Kubernetes 集群所在的可用区")]),t._v(" "),a("td",[t._v("文件系统所在可用区")])]),t._v(" "),a("tr",[a("td",[t._v("存储包")]),t._v(" "),a("td",[t._v("如果当下没有存储包，可以后续绑定")]),t._v(" "),a("td",[t._v("不绑定存储包，将无法使用该文件系统")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:_(218),alt:"image-20190717114354610"}})]),t._v(" "),a("ul",[a("li",[t._v("点击 "),a("em",[a("strong",[t._v("确定")])])])]),t._v(" "),a("p",[t._v("点击确定后，可查看到该文件系统已创建成功")]),t._v(" "),a("p",[a("img",{attrs:{src:_(219),alt:"image-20190717115020848"}})]),t._v(" "),a("ul",[a("li",[t._v("绑定存储包")])]),t._v(" "),a("p",[t._v("请自行在阿里云中为该文件系统绑定存储包，如果不绑定存储包，将无法使用该文件系统。")]),t._v(" "),a("ul",[a("li",[t._v("点击刚创建文件系统的 "),a("em",[a("strong",[t._v("管理")])]),t._v(" 按钮")])]),t._v(" "),a("p",[a("img",{attrs:{src:_(220),alt:"image-20190717115403374"}})]),t._v(" "),a("ul",[a("li",[t._v("点击 "),a("em",[a("strong",[t._v("添加挂载点")])])])]),t._v(" "),a("p",[t._v("并填写表单")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段名称")]),t._v(" "),a("th",[t._v("填写内容")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("挂载点类型")]),t._v(" "),a("td",[t._v("专有网络")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("VPC网络")]),t._v(" "),a("td",[t._v("请选择您的 Kubernetes 集群所在的VPC")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("交换机")]),t._v(" "),a("td",[t._v("请选择您的 Kubernetes 集群所在的交换机")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("权限组")]),t._v(" "),a("td",[t._v("VPC默认权限组（全部允许）")]),t._v(" "),a("td",[t._v("请选择全部允许")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:_(221),alt:"image-20190717115457614"}})]),t._v(" "),a("ul",[a("li",[t._v("点击 "),a("em",[a("strong",[t._v("确定")])])])]),t._v(" "),a("p",[t._v("点击确定后，将完成挂载点创建，如下图所示：")]),t._v(" "),a("p",[a("img",{attrs:{src:_(222),alt:"image-20190717115829821"}})]),t._v(" "),a("ul",[a("li",[t._v("获取 NFS 连接参数：")])]),t._v(" "),a("p",[t._v("在上图界面中，将 "),a("em",[a("strong",[t._v("V4 Mount")])]),t._v(" 的指令复制下来后，如下所示：")]),t._v(" "),a("div",{staticStyle:{"font-family":"Monaco,Menlo,Consolas,Bitstream Vera Sans Mono,monospace",padding:"20px","background-color":"rgb(244, 244, 245)","border-radius":"4px"}},[t._v("\nsudo mount -t nfs -o vers=4,minorversion=0,noresvport "),a("span",{staticStyle:{color:"red","background-color":"rgb(254, 240, 240)"}},[t._v("189344a39c-lex38.cn-beijing.nas.aliyuncs.com")]),t._v(":"),a("span",{staticStyle:{color:"blue","background-color":"rgb(217, 236, 255)"}},[t._v("/")]),t._v(" /mnt\n")]),t._v(" "),a("p",[t._v("其中红色字体的文字为 NFS Server 的地址，蓝色字体的文字为 NFS Path。如下表所示：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段名称")]),t._v(" "),a("th",[t._v("字段取值")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("NFS Server")]),t._v(" "),a("td",[t._v("189344a39c-lex38.cn-beijing.nas.aliyuncs.com")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("NFS Path")]),t._v(" "),a("td",[t._v("/")]),t._v(" "),a("td",[t._v("NFS Server和NFS Path以冒号分隔")])])])]),t._v(" "),a("h3",{attrs:{id:"在-kuboard-创建存储类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-kuboard-创建存储类","aria-hidden":"true"}},[t._v("#")]),t._v(" 在 Kuboard 创建存储类")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("进入 Kuboard "),a("em",[a("strong",[t._v("集群概览页")])])]),t._v(" "),a("p",[t._v("参考 "),a("a",{attrs:{href:"install/install-dashboard?id=%E8%AE%BF%E9%97%AE"}},[t._v("访问 Kuboard")])]),t._v(" "),a("p",[t._v("如下图所示：")])])]),t._v(" "),a("p",[a("img",{attrs:{src:_(223),alt:"image-20190723112105018"}})]),t._v(" "),a("ul",[a("li",[a("p",[t._v("点击 "),a("em",[a("strong",[t._v("创建存储类")])])]),t._v(" "),a("p",[t._v("填写表单")])])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段名称")]),t._v(" "),a("th",[t._v("填写内容")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("名称")]),t._v(" "),a("td",[t._v("cluster-storage")]),t._v(" "),a("td",[t._v("填写你喜欢的名称")])]),t._v(" "),a("tr",[a("td",[t._v("限定名称空间")]),t._v(" "),a("td",[t._v("不填写")]),t._v(" "),a("td",[t._v("如果限定名称空间，"),a("br"),t._v("则在 Kuboard 中，您只能在指定的名称空间中使用该存储类"),a("br"),t._v("在 kubectl 中，不受影响")])]),t._v(" "),a("tr",[a("td",[t._v("存储类型")]),t._v(" "),a("td",[t._v("NFS")]),t._v(" "),a("td",[t._v("目前 Kuboard 只支持 NFS，将要增加其他类型的存储，如 CephFS、Cinder 等")])]),t._v(" "),a("tr",[a("td",[t._v("回收策略")]),t._v(" "),a("td",[t._v("回收后删除")]),t._v(" "),a("td",[t._v("当该存储类创建的 存储卷（Persistent Volume）被删除后，之前该存储卷中的文件可以被：回收后删除 / 回收后保留")])]),t._v(" "),a("tr",[a("td",[t._v("存储卷绑定模式")]),t._v(" "),a("td",[t._v("首次使用时绑定")]),t._v(" "),a("td",[t._v("即刻绑定：当 存储卷被创建时，就在 NFS 中为其分配空间，并绑定；"),a("br"),t._v("首次使用时绑定： 在存储卷被第一次使用到时，才绑定")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:_(224),alt:"image-20190723112143032"}})]),t._v(" "),a("ul",[a("li",[t._v("点击 "),a("em",[a("strong",[t._v("保存")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:_(225),alt:"image-20190723112204681"}})]),t._v(" "),a("ul",[a("li",[t._v("点击 "),a("em",[a("strong",[t._v("应用")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:_(226),alt:"image-20190723113250521"}})]),t._v(" "),a("ul",[a("li",[a("p",[t._v("点击 "),a("em",[a("strong",[t._v("完成")])])]),t._v(" "),a("p",[t._v("此时可在存储资源列表中查看到刚创建的存储类")])])]),t._v(" "),a("p",[a("img",{attrs:{src:_(227),alt:"image-20190723113312360"}})])])},[],!1,null,null,null);v.default=r.exports}}]);